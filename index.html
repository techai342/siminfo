<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SAQIB TOOLKIT - Sim Info Tool</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* ============= Base & Variables ============= */
    :root{
      --bg-img: url("https://i.supaimg.com/694bc89f-16cd-4db2-81c3-d7fcaf845657.jpg");
      --bg-overlay: rgba(255,255,255,0.55);
      --card-bg: rgba(255,255,255,0.65);
      --glass-border: rgba(255,255,255,0.6);
      --muted: #6b7280;
      --accent: #007aff; /* iOS blue */
      --accent-2: #34c759; /* green accent */
      --text: #0b1220;
      --radius: 16px;
      --soft-shadow: 0 8px 30px rgba(14, 25, 40, 0.08);
      --glass-shadow: 0 10px 40px rgba(11,18,32,0.06);
      --glass-strong: rgba(255,255,255,0.85);
      --glass-blur: 14px;
      --transition-fast: 200ms;
    }

    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      background-image: var(--bg-img);
      background-size: cover;
      background-position:center;
      background-attachment: fixed;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:36px;
      /* subtle frosted overlay */
    }

    /* overlay to soften background */
    .wallpaper-overlay{
      position:fixed; inset:0;
      background: linear-gradient(180deg, rgba(255,255,255,0.20), rgba(255,255,255,0.30));
      pointer-events:none;
      z-index:0;
      backdrop-filter: blur(4px) saturate(120%);
    }

    /* subtle animated floating blur shapes for iOS feel */
    .float-shape{
      position:fixed;
      filter: blur(44px) saturate(120%);
      opacity:0.65;
      z-index:0;
      transform: translate3d(0,0,0);
      animation: floaty 12s ease-in-out infinite;
      border-radius: 50%;
      mix-blend-mode: screen;
    }
    .float-1{ width:360px; height:360px; left: -8%; top:-10%; background: linear-gradient(135deg, rgba(0,122,255,0.20), rgba(52,199,89,0.12)); animation-duration:14s;}
    .float-2{ width:300px; height:300px; right:-6%; bottom:-12%; background: linear-gradient(120deg, rgba(255,45,85,0.12), rgba(0,122,255,0.08)); animation-duration:18s; }
    @keyframes floaty {
      0%{ transform:translateY(0) translateX(0) }
      50%{ transform:translateY(18px) translateX(6px) }
      100%{ transform:translateY(0) translateX(0) }
    }

    /* main wrapper */
    .app {
      width:100%;
      max-width:920px;
      z-index:2;
      display:grid;
      grid-template-columns: 1fr 420px;
      gap:28px;
      align-items:start;
    }

    /* responsive */
    @media (max-width:980px){
      .app{ grid-template-columns:1fr; padding-bottom:40px }
    }

    /* Panel styles (left - main tool) */
    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.60));
      border-radius: calc(var(--radius) + 8px);
      box-shadow: var(--soft-shadow);
      border: 1px solid var(--glass-border);
      padding:22px;
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
    }

    header.app-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:18px;
    }
    .brand {
      display:flex;
      align-items:center;
      gap:14px;
    }
    .brand-logo{
      width:56px;height:56px;border-radius:14px;
      background: linear-gradient(135deg,var(--accent), #5ac8fa);
      box-shadow: 0 6px 24px rgba(0,122,255,0.12), inset 0 -6px 18px rgba(255,255,255,0.12);
      display:flex;align-items:center;justify-content:center;color:white;font-weight:700;font-size:18px;
    }
    .brand h1{font-size:18px;letter-spacing:1px}
    .brand p{font-size:12px;color:var(--muted);margin-top:4px}

    .controls {
      display:flex; gap:10px; align-items:center;
    }

    .theme-toggle{
      display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:999px;
      background: var(--glass-strong); border:1px solid rgba(11,18,32,0.03);
      box-shadow: 0 3px 10px rgba(11,18,32,0.04);
      cursor:pointer; font-size:13px;
      transition: transform var(--transition-fast) ease, box-shadow var(--transition-fast);
    }
    .theme-toggle:active{ transform:translateY(1px) }

    /* tool content */
    .tool-card{
      margin-top:6px;
      padding:18px;
      border-radius:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.82), rgba(255,255,255,0.72));
      border: 1px solid rgba(11,18,32,0.02);
      box-shadow: var(--glass-shadow);
    }

    .tool-title{ font-size:20px; font-weight:700; margin-bottom:12px }
    .tool-sub{ color:var(--muted); font-size:13px; margin-bottom:16px }

    .search-options{ display:flex; gap:12px; margin-bottom:14px; flex-wrap:wrap }
    .option-btn{
      padding:10px 14px;border-radius:12px;background:transparent;border:1px solid rgba(11,18,32,0.06);
      font-weight:600;font-size:13px;color:var(--text); cursor:pointer; transition:all 200ms ease;
      display:inline-flex;align-items:center;gap:10px;
    }
    .option-btn.active{
      background: linear-gradient(90deg, rgba(0,122,255,0.10), rgba(52,199,89,0.06));
      border-color: rgba(0,122,255,0.18);
      box-shadow: 0 6px 18px rgba(0,122,255,0.06);
    }

    .input-row{ display:flex; gap:12px; margin-bottom:16px; align-items:center }
    .input-row input[type="text"]{
      flex:1;padding:14px 16px;border-radius:12px;border:1px solid rgba(11,18,32,0.06);
      background: rgba(255,255,255,0.95); font-size:15px; outline:none; transition:box-shadow .2s;
      box-shadow: 0 2px 10px rgba(11,18,32,0.03);
    }
    .input-row input:focus{ box-shadow: 0 6px 26px rgba(0,122,255,0.06); border-color: rgba(0,122,255,0.18) }

    .primary-btn{
      padding:12px 16px;border-radius:12px;border:none;font-weight:700;
      background: linear-gradient(180deg,var(--accent), #005ecb);
      color:white; cursor:pointer; min-width:150px;
      box-shadow: 0 8px 24px rgba(0,122,255,0.14);
      transition: transform .15s ease, box-shadow .15s;
    }
    .primary-btn:active{ transform:translateY(1px) }
    .secondary-btn{
      padding:10px 12px;border-radius:12px;border:1px solid rgba(11,18,32,0.06);background:white;font-weight:700;cursor:pointer;
    }

    /* result container */
    .result-container{
      margin-top:16px; border-radius:12px; padding:14px; background: rgba(255,255,255,0.85);
      border:1px solid rgba(11,18,32,0.03); min-height:180px; box-shadow: 0 8px 30px rgba(11,18,32,0.03)
    }
    .no-data { color:var(--muted); font-weight:600; text-align:center; padding:36px }
    .loading { color:var(--muted); font-weight:700; text-align:center; padding:28px }

    .result-row{ display:flex; gap:12px; padding:12px 8px; border-bottom:1px dashed rgba(11,18,32,0.03) }
    .result-label{ width:120px; color:var(--muted); font-weight:700; font-size:13px }
    .result-value{ flex:1; font-weight:600; }

    .numbers-count{ text-align:center; font-weight:800; color:var(--accent); padding:12px 6px }

    .number-item{ padding:12px; border-radius:10px; margin-bottom:10px; background:rgba(255,255,255,0.98); border:1px solid rgba(11,18,32,0.02) }

    .credit{ text-align:center; color:var(--muted); margin-top:10px; font-weight:700 }

    /* right column - info / actions */
    .side-card{
      position:relative;
      display:flex;flex-direction:column;gap:14px;
      height:100%;
    }
    .info-card{ padding:18px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.78)); border:1px solid rgba(11,18,32,0.03); box-shadow: var(--glass-shadow) }
    .info-card h3{ margin-bottom:6px }
    .info-card p{ color:var(--muted); font-size:13px; line-height:1.4 }

    .share-wrap{ display:flex; gap:10px; align-items:center; justify-content: center }
    .share-btn{
      display:inline-flex;align-items:center;gap:10px;padding:12px 14px;border-radius:12px;background:#25D366;color:white;text-decoration:none;font-weight:800;
      box-shadow: 0 8px 20px rgba(37,211,102,0.12);
    }

    .contact-btn{ display:inline-flex; gap:10px; padding:12px 14px; border-radius:12px; background: linear-gradient(180deg,var(--accent-2), #0db54a); color:white; text-decoration:none; font-weight:800; justify-content:center }

    footer.app-footer{ margin-top:10px; text-align:center; color:var(--muted); font-weight:600; font-size:13px }

    /* small helpers */
    .muted { color:var(--muted) }
    .example-number{ color:var(--accent-2); font-weight:800; margin-top:8px }

    /* fine tuning for mobile inputs */
    @media (max-width:600px){
      .input-row{ flex-direction:column }
      .primary-btn{ width:100% }
      .brand p{ display:none }
    }
  </style>
</head>
<body>
  <div class="wallpaper-overlay" aria-hidden="true"></div>
  <div class="float-shape float-1" aria-hidden="true"></div>
  <div class="float-shape float-2" aria-hidden="true"></div>

  <div class="app" role="main" aria-live="polite">
    <!-- LEFT: Main tool -->
    <div class="panel" style="min-height:420px;">
      <header class="app-header" aria-hidden="false">
        <div class="brand" role="banner">
          <div class="brand-logo">ST</div>
          <div>
            <h1>SAQIB TOOLKIT</h1>
            <p>Secure Information Retrieval System</p>
          </div>
        </div>

        <div class="controls">
          <button class="theme-toggle" id="themeToggle" title="Toggle theme (keeps iOS look)">
            <i class="fas fa-moon"></i><span style="font-weight:700">LIGHT</span>
          </button>
        </div>
      </header>

      <div class="tool-card" role="region" aria-label="SIM information search">
        <div class="tool-title">SIM INFORMATION TOOL</div>
        <div class="tool-sub">Search by phone number or CNIC. Result will be shown below.</div>

        <div class="search-options" role="tablist" aria-label="Search type">
          <button id="phoneOption" class="option-btn active" role="tab" aria-selected="true"><i class="fas fa-phone"></i> Search by Phone</button>
          <button id="cnicOption" class="option-btn" role="tab" aria-selected="false"><i class="fas fa-id-card"></i> Search by CNIC</button>
        </div>

        <div class="input-row">
          <input id="searchInput" type="text" inputmode="numeric" placeholder="Enter 11-digit phone number" maxlength="11" aria-label="Search input">
          <button id="searchBtn" class="primary-btn" aria-label="Initiate scan"><i class="fas fa-search"></i>&nbsp; INITIATE SCAN</button>
        </div>

        <div id="resultContainer" class="result-container" role="status" aria-live="polite">
          <div class="no-data"><i class="fas fa-clock"></i> AWAITING INPUT... READY TO SCAN</div>
        </div>

        <div style="display:flex;gap:10px;justify-content:center;margin-top:14px;">
          <a id="moreTools" class="secondary-btn" href="https://tech-ai1.vercel.app/" target="_blank" rel="noopener">ACCESS MORE TOOLS</a>
          <a id="contact" class="secondary-btn" href="https://wa.me/923478936242" target="_blank" rel="noopener">CONTACT</a>
        </div>

      </div>

      <footer class="app-footer">
        <div>SAQIB TOOLKIT © <span id="year"></span> — SECURE INFORMATION RETRIEVAL SYSTEM</div>
      </footer>
    </div>

    <!-- RIGHT: Info / sharing -->
    <div class="side-card">
      <div class="info-card" aria-hidden="false">
        <h3>How it works</h3>
        <p>Enter an 11-digit phone number or a 13-digit CNIC and press <strong>INITIATE SCAN</strong>. The system will query the same API and display available data.</p>
        <p class="muted" style="margin-top:8px">No ads — clean UI. Background image is set to your supplied wallpaper.</p>
      </div>

      <div class="info-card" style="display:flex;flex-direction:column;gap:10px;align-items:center;">
        <div style="width:100%;text-align:center"><strong class="muted">SHARE</strong></div>
        <div class="share-wrap">
          <a class="share-btn" id="shareWhatsapp" href="#" target="_blank" rel="noopener"><i class="fab fa-whatsapp"></i> SHARE ON WHATSAPP</a>
        </div>
        <a class="contact-btn" href="https://wa.me/923478936242" target="_blank" rel="noopener"><i class="fab fa-whatsapp"></i> CONTACT ON WHATSAPP</a>
      </div>

      <div class="info-card">
        <h3>Credits</h3>
        <p class="muted">System created by MR. SAQIB</p>
      </div>
    </div>
  </div>

  <script>
    // basic UI wiring & existing API kept unchanged
    document.getElementById('year').textContent = new Date().getFullYear();

    const phoneOption = document.getElementById('phoneOption');
    const cnicOption  = document.getElementById('cnicOption');
    const searchInput = document.getElementById('searchInput');
    const searchBtn   = document.getElementById('searchBtn');
    const resultContainer = document.getElementById('resultContainer');
    const shareWhatsapp = document.getElementById('shareWhatsapp');
    const themeToggle = document.getElementById('themeToggle');

    let searchType = 'phone';

    // update share link (keeps original share text)
    const shareText = encodeURIComponent("Get Unlimited Free Tools — try SAQIB TOOLKIT: https://tech-ai1.vercel.app/");
    shareWhatsapp.href = `https://api.whatsapp.com/send?text=${shareText}`;

    // Option toggles
    phoneOption.addEventListener('click', () => {
      searchType = 'phone';
      phoneOption.classList.add('active');
      cnicOption.classList.remove('active');
      searchInput.placeholder = 'Enter 11-digit phone number';
      searchInput.maxLength = 11;
      searchInput.value = '';
      resultContainer.innerHTML = '<div class="no-data"><i class="fas fa-clock"></i> ENTER 11-DIGIT PHONE TO SCAN</div>';
    });

    cnicOption.addEventListener('click', () => {
      searchType = 'cnic';
      cnicOption.classList.add('active');
      phoneOption.classList.remove('active');
      searchInput.placeholder = 'Enter 13-digit CNIC number';
      searchInput.maxLength = 13;
      searchInput.value = '';
      resultContainer.innerHTML = '<div class="no-data"><i class="fas fa-clock"></i> ENTER 13-DIGIT CNIC TO SCAN</div>';
    });

    // theme toggle - keeps iOS aesthetic; toggles between two mild styles
    let lightMode = true;
    themeToggle.addEventListener('click', () => {
      lightMode = !lightMode;
      if(lightMode){
        document.documentElement.style.setProperty('--bg-overlay','rgba(255,255,255,0.55)');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i><span style="font-weight:700">LIGHT</span>';
      } else {
        // slightly cooler glass for "light + cool" alternative
        document.documentElement.style.setProperty('--bg-overlay','rgba(250,250,250,0.45)');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i><span style="font-weight:700">COOL</span>';
      }
    });

    // search actions
    searchBtn.addEventListener('click', searchInfo);
    searchInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') searchInfo(); });

    function searchInfo(){
      const searchValue = searchInput.value.trim();
      if(!searchValue){
        showError(`PLEASE ENTER A ${searchType === 'phone' ? 'PHONE NUMBER' : 'CNIC NUMBER'}`);
        return;
      }

      // numeric only validation
      if(!/^\d+$/.test(searchValue)){
        showValidationError('INVALID INPUT', searchType === 'phone' ? 'Phone number should contain only digits' : 'CNIC should contain only digits', searchType === 'phone' ? '03123456789' : '0000000000000');
        return;
      }

      if(searchType === 'phone' && searchValue.length !== 11){
        showValidationError('INVALID PHONE NUMBER LENGTH', 'Phone number must be exactly 11 digits', '03123456789');
        return;
      }
      if(searchType === 'cnic' && searchValue.length !== 13){
        showValidationError('INVALID CNIC LENGTH', 'CNIC must be exactly 13 digits', '0000000000000');
        return;
      }

      // loading state
      resultContainer.innerHTML = `<div class="loading"><i class="fas fa-spinner fa-spin"></i> SCANNING DATABASE... PLEASE WAIT</div>`;

      // call the same API
      searchByNumber(searchValue, searchType);
    }

    function searchByNumber(searchValue, type){
      const apiUrl = `https://fam-official.serv00.net/api/database.php?number=${encodeURIComponent(searchValue)}`;

      fetch(apiUrl)
        .then(resp => {
          if(!resp.ok) throw new Error('NETWORK RESPONSE ERROR');
          return resp.json();
        })
        .then(data => {
          console.log('API Response:', data);
          handleApiResponse(data, type, searchValue);
        })
        .catch(err => {
          console.error('Fetch failed:', err);
          // try proxy as fallback (keeps your original retry logic)
          tryProxyFetch(searchValue, type);
        });
    }

    function tryProxyFetch(searchValue, type){
      const proxyUrl = 'https://api.allorigins.win/raw?url=';
      const apiUrl = `https://fam-official.serv00.net/api/database.php?number=${encodeURIComponent(searchValue)}`;
      fetch(proxyUrl + encodeURIComponent(apiUrl))
        .then(resp => {
          if(!resp.ok) throw new Error('PROXY RESPONSE ERROR');
          return resp.json();
        })
        .then(data => {
          console.log('Proxy API Response:', data);
          handleApiResponse(data, type, searchValue);
        })
        .catch(err => {
          console.error('Proxy failed:', err);
          showError('DATABASE CONNECTION FAILED. TRY AGAIN.');
        });
    }

    function handleApiResponse(data, type, searchValue){
      if(data && data.success && data.data && data.data.length > 0){
        if(type === 'cnic'){
          displayMultipleResults(data.data, searchValue);
        } else {
          displaySingleResult(data.data[0]);
        }
      } else {
        showNoData();
      }
    }

    function displaySingleResult(userData){
      const name = userData.name || "DATA NOT AVAILABLE";
      const number = userData.number || "DATA NOT AVAILABLE";
      const cnic = userData.cnic || "DATA NOT AVAILABLE";
      const address = userData.address || "DATA NOT AVAILABLE";

      resultContainer.innerHTML = `
        <div class="result-row">
          <div class="result-label">NAME:</div><div class="result-value">${escapeHtml(name)}</div>
        </div>
        <div class="result-row">
          <div class="result-label">NUMBER:</div><div class="result-value">${escapeHtml(number)}</div>
        </div>
        <div class="result-row">
          <div class="result-label">CNIC:</div><div class="result-value">${escapeHtml(cnic)}</div>
        </div>
        <div class="result-row">
          <div class="result-label">ADDRESS:</div><div class="result-value">${escapeHtml(address)}</div>
        </div>
        <div class="credit">CREDIT: MR. ARSLAN</div>
      `;
    }

    function displayMultipleResults(arr, cnicNumber){
      let html = `<div class="numbers-count"><i class="fas fa-mobile-alt"></i> TOTAL ${arr.length} NUMBER(S) FOUND FOR CNIC: ${escapeHtml(cnicNumber)}</div>`;
      arr.forEach((d, idx) => {
        html += `
          <div class="number-item">
            <div style="font-weight:800;margin-bottom:8px">NUMBER ${idx+1}: ${escapeHtml(d.number || 'N/A')}</div>
            <div class="result-row"><div class="result-label">NAME:</div><div class="result-value">${escapeHtml(d.name || 'DATA NOT AVAILABLE')}</div></div>
            <div class="result-row"><div class="result-label">CNIC:</div><div class="result-value">${escapeHtml(d.cnic || 'DATA NOT AVAILABLE')}</div></div>
            <div class="result-row"><div class="result-label">ADDRESS:</div><div class="result-value">${escapeHtml(d.address || 'DATA NOT AVAILABLE')}</div></div>
          </div>
        `;
      });
      html += `<div class="credit">CREDIT: MR. SAQIB</div>`;
      resultContainer.innerHTML = html;
    }

    function showValidationError(title, message, example){
      resultContainer.innerHTML = `
        <div style="padding:18px;border-radius:10px;background:linear-gradient(180deg, rgba(255,240,240,0.95), rgba(255,245,245,0.95));border:1px solid rgba(255,0,0,0.06)">
          <div style="font-weight:800;color:#b91c1c;margin-bottom:8px">${escapeHtml(title)}</div>
          <div style="color:var(--muted);margin-bottom:8px">${escapeHtml(message)}</div>
          <div class="example-number">EXAMPLE: ${escapeHtml(example)}</div>
        </div>
      `;
    }

    function showNoData(){
      resultContainer.innerHTML = `<div class="no-data"><i class="fas fa-exclamation-circle"></i> DATA NOT FOUND IN DATABASE</div>`;
    }

    function showError(msg){
      resultContainer.innerHTML = `<div class="no-data"><i class="fas fa-exclamation-triangle"></i> ${escapeHtml(msg)}</div>`;
    }

    // simple escape to avoid injection in innerHTML
    function escapeHtml(str){
      if(!str) return '';
      return String(str)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'",'&#39;');
    }
  </script>
</body>
</html>
